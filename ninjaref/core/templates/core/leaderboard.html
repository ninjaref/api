{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}Leaderboard{% endblock %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{% static 'core/css/leaderboard.css' %}">
{% endblock %}

{% block content %}
  <div class="alert alert-info" role="alert">
    <strong>Heads up!</strong> Clicking on any of the names below will take you to an individualized profile containing career, course, and obstacle statistics.
  </div>
  <ul id="tabs" class="nav nav-pills" data-tabs="tabs">
    <li class="nav-item">
      <a class="nav-link active" href="#overall" data-toggle="tab">Overall</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#men" data-toggle="tab">Men</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#women" data-toggle="tab">Women</a>
    </li>
  </ul>
  <div id="my-tab-content" class="tab-content" style="display: none;">
    <div class="tab-pane active" id="overall">
      <table id="leaderboard-overall" class="table table-striped" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Speed</th>
            <th>Consistency</th>
            <th>Success</th>
            <th>Ninja Rating</th>
          </tr>
        </thead>
        <tbody>
          {% for r in leaders %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{{ r.ninja.ninja_id }}">{{ r.ninja.first_name }} {{ r.ninja.last_name }}</a></td>
            <td>{{ r.speed|floatformat:2 }}</td>
            <td>{{ r.consistency|floatformat:2 }}</td>
            <td>{{ r.success|floatformat:2 }}</td>
            <td>{{ r.rating|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="tab-pane" id="men">
      <table id="leaderboard-men" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Speed</th>
            <th>Consistency</th>
            <th>Success</th>
            <th>Ninja Rating</th>
          </tr>
        </thead>
        <tbody>
          {% for r in men %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{{ r.ninja.id }}">{{ r.ninja.first_name }} {{ r.ninja.last_name }}</a></td>
            <td>{{ r.speed|floatformat:2 }}</td>
            <td>{{ r.consistency|floatformat:2 }}</td>
            <td>{{ r.success|floatformat:2 }}</td>
            <td>{{ r.rating|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="tab-pane" id="women">
      <table id="leaderboard-women" class="table table-striped" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Speed</th>
            <th>Consistency</th>
            <th>Success</th>
            <th>Ninja Rating</th>
          </tr>
        </thead>
        <tbody>
          {% for r in women %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{{ r.ninja.id }}">{{ r.ninja.first_name }} {{ r.ninja.last_name }}</a></td>
            <td>{{ r.speed|floatformat:2 }}</td>
            <td>{{ r.consistency|floatformat:2 }}</td>
            <td>{{ r.success|floatformat:2 }}</td>
            <td>{{ r.rating|floatformat:2 }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}

{% block js %}
{{ block.super }}
<script type="text/javascript" src="{% static 'vendor/DataTables/jquery.dataTables.min.js' %}"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('#leaderboard-overall').DataTable({
    'bFilter': false,
    'bPaginate': false,
    'bInfo': false
  });
  $('.tab-content').show();
  $('#leaderboard-men').DataTable({
    'bFilter': false,
    'bPaginate': false,
    'bInfo': false
  });
  $('#leaderboard-women').DataTable({
    'bFilter': false,
    'bPaginate': false,
    'bInfo': false
  });
});
</script>
{% endblock %}
